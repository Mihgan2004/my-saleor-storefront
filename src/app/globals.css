@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   CSS RESET & BASE STYLES
======================================== */

*,
*::before,
*::after {
	box-sizing: border-box;
	margin: 0;
	padding: 0;
}

html {
	font-size: 16px;
	scroll-behavior: smooth;
	-webkit-text-size-adjust: 100%;
	text-size-adjust: 100%;
}

body {
	line-height: 1.6;
	font-family:
		var(--font-sans),
		system-ui,
		-apple-system,
		BlinkMacSystemFont,
		"Segoe UI",
		sans-serif;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	text-rendering: optimizeLegibility;
}

/* ========================================
   CSS VARIABLES & COLOR SYSTEM
   Obsidian × Crimson × Olive Theme
======================================== */

:root {
	/* surfaces */
	--obsidian: 216 20% 5%;
	--charcoal: 216 18% 7%;
	--graphite: 216 16% 11%;

	--zinc: 220 14% 19%;
	--slate: 217 12% 26%;

	--white: 0 0% 100%;
	--silver: 220 13% 84%;

	/* NEW accent */
	--accent: 90 18% 40%; /* #6B7E4E Sage/OD green */
	--accent-hover: 90 18% 46%; /* #7C8C5A */
	--accent-soft: 90 18% 40%;

	/* micro-tech */
	--tech: 174 62% 45%; /* #2BB7A9 */

	/* legacy map — чтобы старые классы не сломались */
	--crimson: var(--accent);
	--crimson-hover: var(--accent-hover);
	--crimson-soft: var(--accent-soft);

	--steel: 210 14% 35%;
	--emerald: 150 60% 41%;
	--amber: 42 70% 47%;

	/* Дополняем недостающие из проекта */
	--olive: 90 18% 40%;
	--olive-hover: 90 18% 46%;
	--olive-soft: 90 18% 18%;

	--steel-soft: 210 14% 25%;

	/* Радиусы */
	--radius-sm: 8px;
	--radius-md: 16px;
	--radius-lg: 24px;
	--radius-xl: 32px;

	/* Шкала отступов */
	--space-xs: 4px;
	--space-sm: 8px;
	--space-md: 12px;
	--space-lg: 16px;
	--space-xl: 24px;
	--space-2xl: 32px;

	/* Переходы и z-index */
	--transition-normal: 240ms cubic-bezier(0.22, 0.61, 0.36, 1);
	--z-hide: -1;
	--z-base: 1;
	--safe-top: env(safe-area-inset-top, 0px);
	--safe-right: env(safe-area-inset-right, 0px);
	--safe-bottom: env(safe-area-inset-bottom, 0px);
	--safe-left: env(safe-area-inset-left, 0px);
}

/* ========================================
   UTILITY CLASSES - OBSIDIAN THEME
======================================== */

/* Background Utilities */
.bg-obsidian {
	background-color: hsl(var(--obsidian));
}
.bg-charcoal {
	background-color: hsl(var(--charcoal));
}
.bg-graphite {
	background-color: hsl(var(--graphite));
}
.bg-zinc {
	background-color: hsl(var(--zinc));
}
.bg-slate {
	background-color: hsl(var(--slate));
}

.bg-crimson {
	background-color: hsl(var(--crimson));
}
.bg-crimson-soft {
	background-color: hsl(var(--crimson-soft));
}
.bg-olive {
	background-color: hsl(var(--olive));
}
.bg-olive-soft {
	background-color: hsl(var(--olive-soft));
}
.bg-steel {
	background-color: hsl(var(--steel));
}
.bg-steel-soft {
	background-color: hsl(var(--steel-soft));
}

/* Text Utilities */
.text-white {
	color: hsl(var(--white));
}
.text-silver {
	color: hsl(var(--silver));
}
.text-crimson {
	color: hsl(var(--crimson));
}
.text-olive {
	color: hsl(var(--olive));
}
.text-steel {
	color: hsl(var(--steel));
}
.text-emerald {
	color: hsl(var(--emerald));
}
.text-amber {
	color: hsl(var(--amber));
}

/* Border Utilities */
.border-zinc {
	border-color: hsl(var(--zinc));
}
.border-slate {
	border-color: hsl(var(--slate));
}
.border-crimson {
	border-color: hsl(var(--crimson));
}
.border-olive {
	border-color: hsl(var(--olive));
}

/* Legacy support */
.bg-fortress {
	background-color: hsl(var(--fortress));
}
.bg-shadow {
	background-color: hsl(var(--shadow));
}
.bg-shadow-light {
	background-color: hsl(var(--shadow-light));
}
.bg-shadow-dark {
	background-color: hsl(var(--shadow-dark));
}
.text-fortress-fg {
	color: hsl(var(--fortress-fg));
}

/* ========================================
   LAYOUT COMPONENTS
======================================== */

/* Body Surface with Tactical Background */
.body-surface {
	position: relative;
	min-height: 100vh;
	background-color: hsl(var(--obsidian));
	color: hsl(var(--white));
	isolation: isolate;
}

.body-surface::before {
	content: "";
	position: fixed;
	inset: 0;
	background: radial-gradient(800px at 25% 20%, hsl(var(--crimson-soft) / 0.12), transparent 60%),
		radial-gradient(600px at 75% 80%, hsl(var(--olive-soft) / 0.08), transparent 70%),
		radial-gradient(400px at 50% 50%, hsl(var(--steel-soft) / 0.06), transparent 80%);
	z-index: var(--z-hide);
	pointer-events: none;
}

/* Tactical Grid Pattern */
.grid-pattern {
	background-image: linear-gradient(hsl(var(--zinc) / 0.4) 1px, transparent 1px),
		linear-gradient(90deg, hsl(var(--zinc) / 0.4) 1px, transparent 1px);
	background-size: 32px 32px;
}

/* ========================================
   CARD COMPONENTS - TACTICAL STYLE
======================================== */

.card {
	background: hsl(var(--charcoal));
	border: 1px solid hsl(var(--zinc));
	border-radius: var(--radius-lg);
	box-shadow:
		0 4px 16px hsl(0 0% 0% / 0.4),
		0 1px 4px hsl(0 0% 0% / 0.2);
	transition: all var(--transition-normal);
	position: relative;
	overflow: hidden;
}

.card:hover {
	transform: translateY(-2px);
	border-color: hsl(var(--slate));
	box-shadow:
		0 8px 32px hsl(0 0% 0% / 0.5),
		0 2px 8px hsl(0 0% 0% / 0.25);
}

.card-tactical {
	background: hsl(var(--graphite));
	border: 1px solid hsl(var(--crimson) / 0.3);
	border-radius: var(--radius-xl);
	box-shadow:
		0 0 24px hsl(var(--crimson) / 0.1),
		0 4px 16px hsl(0 0% 0% / 0.4);
}

/* ========================================
   BADGE COMPONENTS - MILITARY STYLE
======================================== */

.badge {
	display: inline-flex;
	align-items: center;
	gap: var(--space-sm);
	padding: var(--space-sm) var(--space-md);
	border-radius: var(--radius-md);
	font-size: var(--text-xs);
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	background: hsl(var(--zinc));
	color: hsl(var(--silver));
	border: 1px solid hsl(var(--slate));
}

.badge-crimson {
	background: hsl(var(--crimson-soft));
	color: hsl(var(--crimson));
	border-color: hsl(var(--crimson) / 0.4);
	box-shadow: 0 0 12px hsl(var(--crimson) / 0.2);
}

.badge-olive {
	background: hsl(var(--olive-soft));
	color: hsl(var(--olive));
	border-color: hsl(var(--olive) / 0.4);
}

.badge-steel {
	background: hsl(var(--steel-soft));
	color: hsl(var(--steel));
	border-color: hsl(var(--steel) / 0.4);
}

.badge-pulse {
	width: 6px;
	height: 6px;
	border-radius: 50%;
	background: currentColor;
	animation: pulse 2s ease-in-out infinite;
}

/* ========================================
   BUTTON COMPONENTS - TACTICAL STYLE
======================================== */

.btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	gap: var(--space-sm);
	padding: var(--space-md) var(--space-xl);
	border-radius: var(--radius-lg);
	font-size: var(--text-sm);
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.025em;
	text-decoration: none;
	border: 1px solid;
	transition: all var(--transition-normal);
	position: relative;
	overflow: hidden;
	cursor: pointer;
	user-select: none;
}

.btn:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

.btn-crimson {
	background: hsl(var(--crimson));
	color: hsl(var(--white));
	border-color: hsl(var(--crimson));
	box-shadow: 0 0 20px hsl(var(--crimson) / 0.3);
}

.btn-crimson:hover:not(:disabled) {
	background: hsl(var(--crimson-hover));
	border-color: hsl(var(--crimson-hover));
	box-shadow:
		0 0 30px hsl(var(--crimson) / 0.4),
		inset 0 0 20px hsl(var(--crimson) / 0.1);
	transform: translateY(-1px);
}

.btn-olive {
	background: hsl(var(--olive));
	color: hsl(var(--white));
	border-color: hsl(var(--olive));
}

.btn-olive:hover:not(:disabled) {
	background: hsl(var(--olive-hover));
	border-color: hsl(var(--olive-hover));
	transform: translateY(-1px);
}

.btn-outline {
	background: transparent;
	color: hsl(var(--silver));
	border-color: hsl(var(--zinc));
}

.btn-outline:hover:not(:disabled) {
	background: hsl(var(--white));
	color: hsl(var(--obsidian));
	border-color: hsl(var(--white));
}

/* ========================================
   TYPOGRAPHY COMPONENTS
======================================== */

.font-tactical {
	font-family: var(--font-display, var(--font-sans));
}

.text-gradient-tactical {
	background: linear-gradient(135deg, hsl(var(--crimson)), hsl(var(--olive)));
	background-clip: text;
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-size: 200% 200%;
	animation: gradient-shift 3s ease-in-out infinite;
}

/* ========================================
   FORM COMPONENTS
======================================== */

.form-input {
	width: 100%;
	padding: var(--space-md) var(--space-lg);
	background: hsl(var(--charcoal));
	border: 1px solid hsl(var(--zinc));
	border-radius: var(--radius-md);
	color: hsl(var(--white));
	font-size: var(--text-sm);
	transition: all var(--transition-normal);
}

.form-input:focus {
	outline: none;
	border-color: hsl(var(--crimson));
	box-shadow: 0 0 0 3px hsl(var(--crimson) / 0.1);
}

.form-input::placeholder {
	color: hsl(var(--silver));
	text-transform: uppercase;
	letter-spacing: 0.05em;
	font-size: var(--text-xs);
}

/* ========================================
   NAVIGATION COMPONENTS
======================================== */

.nav-link {
	position: relative;
	color: hsl(var(--silver));
	text-decoration: none;
	font-size: var(--text-sm);
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	transition: color var(--transition-normal);
}

.nav-link:hover {
	color: hsl(var(--white));
}

.nav-link::after {
	content: "";
	position: absolute;
	bottom: -4px;
	left: 0;
	width: 0;
	height: 2px;
	background: linear-gradient(90deg, hsl(var(--crimson)), hsl(var(--crimson) / 0.4));
	transition: width var(--transition-normal);
	border-radius: 9999px;
}

.nav-link:hover::after,
.nav-link.active::after {
	width: 100%;
}

/* ========================================
   ANIMATION KEYFRAMES
======================================== */

@keyframes pulse {
	0%,
	100% {
		opacity: 1;
		transform: scale(1);
	}
	50% {
		opacity: 0.6;
		transform: scale(1.1);
	}
}

@keyframes gradient-shift {
	0%,
	100% {
		background-position: 0% 50%;
	}
	50% {
		background-position: 100% 50%;
	}
}

@keyframes fade-in {
	from {
		opacity: 0;
		transform: translateY(20px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slide-in-right {
	from {
		opacity: 0;
		transform: translateX(-20px);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes tactical-glow {
	0%,
	100% {
		box-shadow: 0 0 15px hsl(var(--crimson) / 0.2);
	}
	50% {
		box-shadow: 0 0 25px hsl(var(--crimson) / 0.4);
	}
}

/* Animation Classes */
.animate-fade-in {
	animation: fade-in 0.6s ease-out;
}

.animate-slide-in-right {
	animation: slide-in-right 0.6s ease-out;
}

.animate-tactical-glow {
	animation: tactical-glow 2s ease-in-out infinite;
}

/* ========================================
   UTILITY ANIMATIONS
======================================== */

.hover-lift {
	transition: transform var(--transition-normal);
}

.hover-lift:hover {
	transform: translateY(-2px);
}

.stagger-delay-1 {
	animation-delay: 0.1s;
}
.stagger-delay-2 {
	animation-delay: 0.2s;
}
.stagger-delay-3 {
	animation-delay: 0.3s;
}
.stagger-delay-4 {
	animation-delay: 0.4s;
}
.stagger-delay-5 {
	animation-delay: 0.5s;
}

/* ========================================
   FOCUS & ACCESSIBILITY
======================================== */

.focus-visible {
	outline: 2px solid hsl(var(--crimson));
	outline-offset: 2px;
	border-radius: var(--radius-sm);
}

/* ========================================
   SCROLLBAR STYLING - TACTICAL
======================================== */

::-webkit-scrollbar {
	width: 8px;
}

::-webkit-scrollbar-track {
	background: hsl(var(--charcoal));
}

::-webkit-scrollbar-thumb {
	background: hsl(var(--zinc));
	border-radius: var(--radius-sm);
}

::-webkit-scrollbar-thumb:hover {
	background: hsl(var(--slate));
}

/* ========================================
   RESPONSIVE DESIGN
======================================== */

@media (max-width: 768px) {
	:root {
		--text-5xl: 2.5rem;
		--text-4xl: 2rem;
		--text-3xl: 1.75rem;
	}

	.card {
		margin: 0 var(--space-md);
	}

	.btn {
		padding: var(--space-sm) var(--space-lg);
		font-size: var(--text-xs);
	}
}

@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}
/* Утилиты, которых не хватало */
.z-base {
	z-index: var(--z-base);
}
.z-hide {
	z-index: var(--z-hide);
}
html,
body {
	width: 100%;
	overflow-x: hidden; /* чтобы отрицательные маргины не создавали горизонтальный скролл */
	box-sizing: border-box;
}
*,
*::before,
*::after {
	box-sizing: inherit;
}
/***** мобильная плавность и изоляция рендера *****/
@media (max-width: 1023px) {
	.snap-y {
		scroll-snap-type: y mandatory;
	}
	.snap-start {
		scroll-snap-align: start;
	}
	.gpu {
		transform: translateZ(0);
		will-change: transform, opacity;
	}
}

/* если пользователь просит меньше анимаций — мы их снижаем */
@media (prefers-reduced-motion: reduce) {
	* {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}
/* ==== Mobile full-bleed & safe area helpers ==== */
/* Глобально отключаем горизонтальный скролл */
html,
body {
	overflow-x: hidden;
}

/* Помощник для секций на всю ширину вьюпорта
   убирает влияние контейнеров/центровок */
.full-bleed {
	width: 100vw;
	max-width: 100vw;
	margin-left: calc(50% - 50vw);
	margin-right: calc(50% - 50vw);
}

/* Универсальные внутренние отступы с учётом safe-area */
.safe-x {
	padding-left: max(16px, var(--safe-left));
	padding-right: max(16px, var(--safe-right));
}
.safe-y {
	padding-top: max(16px, var(--safe-top));
	padding-bottom: max(16px, var(--safe-bottom));
}
/* ==== Full Bleed (секция/медиа на 100vw) ==== */
.full-bleed {
	width: 100vw;
	max-width: 100vw;
	margin-left: calc(50% - 50vw);
	margin-right: calc(50% - 50vw);
}
/* Лонгрид прячет глобальную шапку (добавь класс .site-header на контейнер хидера) */
[data-longread-active="true"] .site-header {
	opacity: 0;
	transform: translateY(-10px);
	pointer-events: none;
	transition:
		opacity 0.25s ease,
		transform 0.25s ease;
}

/* sticky отступ под safe-area и чтобы не попадать под шапку */
.longread-sticky {
	top: calc(env(safe-area-inset-top, 0px) + 8px);
}

/* Защита от «стеклянной плашки» — не вылезает за капсулу */
.site-header {
	overflow: hidden;
}
/* Лишь на мобильных — прячем глобальный хедер, пока активен лонгрид */
@media (max-width: 1023px) {
	:root[data-longread-active="true"] .site-header,
	:root[data-longread-active="true"] header[role="banner"],
	:root[data-longread-active="true"] [data-ui="app-header"] {
		opacity: 0 !important;
		visibility: hidden !important;
		transform: translateY(-16px) !important;
		pointer-events: none !important;
	}
}

/* немного ниже приклеиваем заголовок главы (учтём системную панель) */
.longread-sticky {
	top: calc(env(safe-area-inset-top, 0px) + 18px);
}

/* защита от "стеклянной плашки", если у хедера есть backdrop-blur и тени */
.site-header {
	overflow: hidden;
}
